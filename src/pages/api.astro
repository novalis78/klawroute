---
import Layout from '../layouts/Layout.astro';

const regions = [
  { id: 'eu-frankfurt', name: 'Frankfurt', country: 'DE', ip: '134.122.87.87', port: 51820 },
  { id: 'ap-sydney', name: 'Sydney', country: 'AU', ip: '209.38.30.75', port: 51820 },
  { id: 'us-west', name: 'San Francisco', country: 'US', ip: '24.144.90.82', port: 51820 },
  { id: 'us-east', name: 'New York', country: 'US', ip: '69.55.49.132', port: 51820 },
];
---

<Layout
  title="KeyRoute API â€” WireGuard Tunnel API for AI Agents"
  description="Complete API reference for KeyRoute. Create ephemeral WireGuard tunnels from any region. Built for AI agents and automated systems."
>
  <!-- Background -->
  <div class="fixed inset-0 -z-10 bg-[#0a0a0a]">
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(168,85,247,0.08),transparent)]"></div>
  </div>

  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 border-b border-white/5 bg-[#0a0a0a]/80 backdrop-blur-xl">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex h-16 items-center justify-between">
        <a href="/" class="flex items-center gap-2.5 text-white font-medium">
          <div class="flex h-7 w-7 items-center justify-center rounded-lg bg-white/10">
            <svg class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          KeyRoute
        </a>

        <div class="hidden md:flex items-center gap-8">
          <a href="/" class="text-[13px] text-zinc-400 hover:text-white transition-colors">Home</a>
          <a href="/api" class="text-[13px] text-white transition-colors">API</a>
          <a href="/docs" class="text-[13px] text-zinc-400 hover:text-white transition-colors">Docs</a>
        </div>

        <a href="https://keykeeper.world" target="_blank" class="inline-flex items-center gap-1.5 rounded-full bg-white px-4 py-1.5 text-[13px] font-medium text-zinc-900 transition-opacity hover:opacity-90">
          Get API Key
        </a>
      </div>
    </div>
  </nav>

  <main class="pt-24 pb-16">
    <!-- Hero -->
    <section class="py-16">
      <div class="mx-auto max-w-4xl px-6">
        <div class="text-center mb-12">
          <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-zinc-400 mb-6">
            <span class="h-1.5 w-1.5 rounded-full bg-purple-500"></span>
            API v1
          </div>
          <h1 class="text-4xl font-semibold tracking-tight text-white mb-4">
            KeyRoute API
          </h1>
          <p class="text-lg text-zinc-400 max-w-2xl mx-auto">
            Create ephemeral WireGuard tunnels from any of our 4 global regions. Full TCP/UDP routing through dedicated IP addresses.
          </p>
        </div>

        <!-- Quick Start -->
        <div class="rounded-xl border border-white/10 bg-white/[0.02] overflow-hidden mb-12">
          <div class="flex items-center justify-between px-4 py-3 border-b border-white/5">
            <span class="text-sm font-medium text-white">Quick Start</span>
            <span class="text-xs text-zinc-500 font-mono">curl</span>
          </div>
          <div class="p-5 overflow-x-auto">
            <pre class="font-mono text-[13px] leading-relaxed"><code><span class="text-zinc-500"># Create a 5-minute tunnel from Frankfurt</span>
<span class="text-zinc-300">curl</span> -X POST https://keyroute.world/v1/tunnel \
  -H <span class="text-purple-400">"Authorization: Bearer YOUR_KEYKEEPER_TOKEN"</span> \
  -H <span class="text-purple-400">"Content-Type: application/json"</span> \
  -d <span class="text-violet-400">'&#123;
    "region": "eu-frankfurt",
    "duration": 300
  &#125;'</span>

<span class="text-zinc-500"># Response includes WireGuard config</span>
&#123;
  "tunnel_id": "tun_abc123...",
  "wireguard_config": "[Interface]\\nPrivateKey = ...",
  "endpoint": "134.122.87.87:51820",
  "expires_at": "2024-12-01T19:05:00Z"
&#125;</code></pre>
          </div>
        </div>

        <!-- Base URLs -->
        <div class="grid md:grid-cols-2 gap-6 mb-12">
          <div class="rounded-xl border border-white/5 bg-white/[0.02] p-6">
            <h3 class="text-sm font-medium text-white mb-2">Base URL</h3>
            <code class="text-sm font-mono text-zinc-400">https://keyroute.world</code>
          </div>
          <div class="rounded-xl border border-white/5 bg-white/[0.02] p-6">
            <h3 class="text-sm font-medium text-white mb-2">Authentication</h3>
            <code class="text-sm font-mono text-zinc-400">Bearer &lt;keykeeper_token&gt;</code>
          </div>
        </div>
      </div>
    </section>

    <!-- Endpoints -->
    <section class="py-12 border-t border-white/5">
      <div class="mx-auto max-w-4xl px-6">
        <h2 class="text-2xl font-semibold text-white mb-8">Endpoints</h2>

        <!-- POST /v1/tunnel -->
        <div class="mb-12">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-xs font-medium text-emerald-500 bg-emerald-500/10 px-2 py-1 rounded">POST</span>
            <code class="text-lg font-mono text-white">/v1/tunnel</code>
          </div>
          <p class="text-zinc-400 mb-6">
            Create a new ephemeral WireGuard tunnel. Returns a complete WireGuard configuration.
          </p>

          <div class="rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden mb-6">
            <div class="px-4 py-3 border-b border-white/5">
              <span class="text-sm font-medium text-zinc-300">Request Body</span>
            </div>
            <div class="p-5 overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="text-left text-zinc-500">
                    <th class="pb-3 pr-4 font-medium">Parameter</th>
                    <th class="pb-3 pr-4 font-medium">Type</th>
                    <th class="pb-3 pr-4 font-medium">Required</th>
                    <th class="pb-3 font-medium">Description</th>
                  </tr>
                </thead>
                <tbody class="text-zinc-400">
                  <tr class="border-t border-white/5">
                    <td class="py-3 pr-4 font-mono text-white">region</td>
                    <td class="py-3 pr-4">string</td>
                    <td class="py-3 pr-4"><span class="text-zinc-500">No</span></td>
                    <td class="py-3">Region ID (default: auto)</td>
                  </tr>
                  <tr class="border-t border-white/5">
                    <td class="py-3 pr-4 font-mono text-white">duration</td>
                    <td class="py-3 pr-4">number</td>
                    <td class="py-3 pr-4"><span class="text-emerald-500">Yes</span></td>
                    <td class="py-3">Duration in seconds (30-3600)</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden">
            <div class="px-4 py-3 border-b border-white/5">
              <span class="text-sm font-medium text-zinc-300">Response</span>
            </div>
            <div class="p-5 overflow-x-auto">
              <pre class="font-mono text-[13px] leading-relaxed"><code>&#123;
  "tunnel_id": "tun_f4b047e273e16b48",
  "region": "eu-frankfurt",
  "wireguard_config": "[Interface]\\nPrivateKey = ...\\n[Peer]\\n...",
  "endpoint": "134.122.87.87:51820",
  "client_ip": "10.100.0.2",
  "expires_at": "2024-12-01T19:05:00.000Z"
&#125;</code></pre>
            </div>
          </div>
        </div>

        <!-- GET /v1/tunnel/:id -->
        <div class="mb-12">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-xs font-medium text-sky-500 bg-sky-500/10 px-2 py-1 rounded">GET</span>
            <code class="text-lg font-mono text-white">/v1/tunnel/:id</code>
          </div>
          <p class="text-zinc-400 mb-6">
            Get tunnel status and billing information.
          </p>
        </div>

        <!-- DELETE /v1/tunnel/:id -->
        <div class="mb-12">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-xs font-medium text-red-500 bg-red-500/10 px-2 py-1 rounded">DELETE</span>
            <code class="text-lg font-mono text-white">/v1/tunnel/:id</code>
          </div>
          <p class="text-zinc-400 mb-6">
            Close tunnel early. Only pays for actual usage time.
          </p>
        </div>

        <!-- GET /v1/tunnels -->
        <div class="mb-12">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-xs font-medium text-sky-500 bg-sky-500/10 px-2 py-1 rounded">GET</span>
            <code class="text-lg font-mono text-white">/v1/tunnels</code>
          </div>
          <p class="text-zinc-400 mb-6">
            List all tunnels for your agent.
          </p>
        </div>
      </div>
    </section>

    <!-- Regions -->
    <section class="py-12 border-t border-white/5">
      <div class="mx-auto max-w-4xl px-6">
        <h2 class="text-2xl font-semibold text-white mb-8">Available Regions</h2>

        <div class="grid sm:grid-cols-2 gap-4">
          {regions.map(region => (
            <div class="rounded-xl border border-white/5 bg-white/[0.02] p-5">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                  <span class="h-2 w-2 rounded-full bg-purple-500"></span>
                  <span class="font-medium text-white">{region.name}</span>
                </div>
                <span class="text-xs text-zinc-500">{region.country}</span>
              </div>
              <div class="space-y-1 text-sm">
                <div class="flex justify-between">
                  <span class="text-zinc-500">Region ID</span>
                  <code class="font-mono text-zinc-400">{region.id}</code>
                </div>
                <div class="flex justify-between">
                  <span class="text-zinc-500">WireGuard Port</span>
                  <span class="text-zinc-400">{region.port}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="py-12 border-t border-white/5">
      <div class="mx-auto max-w-4xl px-6">
        <h2 class="text-2xl font-semibold text-white mb-8">How It Works</h2>

        <div class="space-y-6">
          <div class="rounded-xl border border-white/5 bg-white/[0.02] p-6">
            <div class="flex items-start gap-4">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-purple-500/10 text-purple-400 font-medium">1</div>
              <div>
                <h3 class="text-white font-medium mb-2">Create Tunnel</h3>
                <p class="text-sm text-zinc-400">POST to /v1/tunnel with your desired duration. We generate a unique keypair and configure the server.</p>
              </div>
            </div>
          </div>

          <div class="rounded-xl border border-white/5 bg-white/[0.02] p-6">
            <div class="flex items-start gap-4">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-purple-500/10 text-purple-400 font-medium">2</div>
              <div>
                <h3 class="text-white font-medium mb-2">Configure WireGuard</h3>
                <p class="text-sm text-zinc-400">Use the returned WireGuard config to connect. All traffic will route through our server's IP.</p>
              </div>
            </div>
          </div>

          <div class="rounded-xl border border-white/5 bg-white/[0.02] p-6">
            <div class="flex items-start gap-4">
              <div class="flex h-8 w-8 items-center justify-center rounded-full bg-purple-500/10 text-purple-400 font-medium">3</div>
              <div>
                <h3 class="text-white font-medium mb-2">Use & Close</h3>
                <p class="text-sm text-zinc-400">Tunnel auto-expires or DELETE early. You only pay for seconds used at $0.001/second.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="py-16 border-t border-white/5">
      <div class="mx-auto max-w-xl px-6 text-center">
        <h2 class="text-2xl font-semibold text-white mb-4">Ready to route?</h2>
        <p class="text-zinc-500 mb-8">
          Get your API key from KeyKeeper and start creating tunnels.
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
          <a href="https://keykeeper.world" target="_blank" class="inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-medium text-zinc-900 transition-opacity hover:opacity-90">
            Get API Key
          </a>
          <a href="/docs" class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-6 py-3 text-sm font-medium text-white transition-all hover:bg-white/10">
            Full Documentation
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="border-t border-white/5 py-12">
    <div class="mx-auto max-w-5xl px-6">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex items-center gap-2 text-sm text-zinc-600">
          Part of KeyKeeper
        </div>
        <div class="flex items-center gap-6 text-xs text-zinc-600">
          <a href="/" class="hover:text-zinc-400 transition-colors">Home</a>
          <a href="/api" class="hover:text-zinc-400 transition-colors">API</a>
          <a href="/docs" class="hover:text-zinc-400 transition-colors">Docs</a>
          <a href="https://keykeeper.world" target="_blank" class="hover:text-zinc-400 transition-colors">KeyKeeper</a>
        </div>
      </div>
    </div>
  </footer>
</Layout>
